{"ast":null,"code":"import axios from 'axios'; // получает новости из базы и записывает в store\n\nexport var addNews = function addNews() {\n  return function (dispatch) {\n    axios.get('/api/articles').then(function (res) {\n      dispatch({\n        type: 'ADD_NEWS',\n        payload: res.data,\n        loaded: true\n      });\n    }).catch(function (err) {\n      return console.log(err);\n    });\n  };\n}; // постит колличество просмотров в базу и добавляет их в store\n\nexport var viewNews = function viewNews(id, elem) {\n  return function (dispatch) {\n    axios.post(\"/api/articles/\".concat(id), {\n      elem: elem,\n      views: true\n    }).then(function (res) {\n      dispatch({\n        type: 'VIEW_NEWS',\n        id: id,\n        views: res.data.views,\n        ip: res.data.userIpViews\n      });\n    }).catch(function (err) {\n      return console.log(err);\n    });\n  };\n}; // постит колличество лайков в базу и добавляет их в store\n\nexport var likeNews = function likeNews(id, elem) {\n  return function (dispatch) {\n    axios.post(\"/api/articles/\".concat(id), {\n      elem: elem,\n      likes: true\n    }).then(function (res) {\n      console.log(res.data, \"res\");\n      return dispatch({\n        type: 'LIKE_NEWS',\n        id: id,\n        likes: res.data.likes,\n        ip: res.data.userIpLikes\n      });\n    });\n  };\n};\nexport var searchNews = function searchNews(text) {\n  return {\n    type: 'SEARCH_NEWS',\n    payload: text\n  };\n};\nexport var addVisitor = function addVisitor(visitors) {\n  return function (dispatch) {\n    axios.post('/api/visitors/', {\n      visitors: visitors\n    }).then(function (res) {\n      if (!res.data) {\n        return dispatch({\n          type: 'ADD_VISITOR',\n          payload: []\n        });\n      }\n\n      return dispatch({\n        type: 'ADD_VISITOR',\n        payload: res.data.visitorsIp\n      });\n    });\n  };\n};","map":{"version":3,"sources":["/home/dmitry/Рабочий стол/newsAPP 2.0/client/src/actions/actions.js"],"names":["axios","addNews","dispatch","get","then","res","type","payload","data","loaded","catch","err","console","log","viewNews","id","elem","post","views","ip","userIpViews","likeNews","likes","userIpLikes","searchNews","text","addVisitor","visitors","visitorsIp"],"mappings":"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","sourcesContent":["import axios from 'axios';\n\n// получает новости из базы и записывает в store\nexport const addNews = () => (dispatch) =>{\n    axios\n        .get('/api/articles')\n        .then(res=> {\n            dispatch({\n                type: 'ADD_NEWS',\n                payload: res.data,\n                loaded: true \n            });\n        })\n        .catch(err =>\n            console.log(err));\n };\n\n// постит колличество просмотров в базу и добавляет их в store\nexport const viewNews = (id, elem) => (dispatch) =>{\n    axios\n        .post(`/api/articles/${id}`, {elem, views: true})\n        .then(res=>{\n            dispatch({\n                type: 'VIEW_NEWS',\n                id: id,\n                views: res.data.views,\n                ip: res.data.userIpViews\n            });\n        })\n        .catch(err =>\n            console.log(err));\n};\n\n// постит колличество лайков в базу и добавляет их в store\nexport const likeNews = ( id, elem) => (dispatch) =>{\n    axios\n        .post(`/api/articles/${id}`, {elem, likes: true})\n\n    .then(res=>{\n        console.log(res.data,\"res\")\n      return  dispatch({\n            type: 'LIKE_NEWS',\n            id: id, \n            likes: res.data.likes,\n            ip: res.data.userIpLikes\n         }) \n        })\n    };\n\n\nexport const searchNews = (text) => ({type: 'SEARCH_NEWS', payload: text});\n\nexport const addVisitor = (visitors) => (dispatch) => {\n   \n   \n    axios.post('/api/visitors/', {visitors})\n    .then(res => {\n        if(!res.data){\n            \n            return dispatch({\n                type: 'ADD_VISITOR',\n                payload: []\n            })\n        } \n        \n        return dispatch({\n            type: 'ADD_VISITOR',\n            payload: res.data.visitorsIp\n        })\n    })\n}\n\n\n\n"]},"metadata":{},"sourceType":"module"}