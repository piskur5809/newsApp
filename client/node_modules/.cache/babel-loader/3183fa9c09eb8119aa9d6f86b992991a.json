{"ast":null,"code":"import _toConsumableArray from \"/home/dmitry/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/NewsAppRedux/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"/home/dmitry/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/NewsAppRedux/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"/home/dmitry/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/NewsAppRedux/client/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/home/dmitry/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/NewsAppRedux/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/dmitry/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/NewsAppRedux/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/dmitry/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/NewsAppRedux/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/dmitry/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/NewsAppRedux/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/dmitry/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/NewsAppRedux/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/dmitry/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/NewsAppRedux/client/src/components/app/app.js\";\nimport React, { Component } from 'react';\nimport AppHeader from '../app-header';\nimport Body from '../app-body';\nimport Footer from '../app-footer';\nimport store from '../../store'; // import NewsService from '../../services/api-service';\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, App);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(App)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      //    articles: [\n      //         {\n      //         author: \"Ann Schmidt\",\n      //         content: \"Approximately 56,578 pounds of stuffed sandwiches have been recalled because they are reportedly contaminated by semi-transparent plastic, according to the Food Safety and Inspection Service (FSIS). The recall was announced Friday, two days after the FSIS was… [+988 chars]\",\n      //         description: \"Approximately 56,578 pounds of stuffed sandwiches have been recalled because they are reportedly contaminated by semi-transparent plastic, according to the Food Safety and Inspection Service (FSIS).\",\n      //         id: 2,\n      //         likes: 0,\n      //         publishedAt: \"2019-04-09T00:39:51Z\",\n      //         show: false,\n      //         source: {id: \"fox-news\", name: \"Fox News\"},\n      //         title: \"Stuffed sandwiches recalled over possible plastic contamination, officials announce - Fox News\",\n      //         url: \"https://www.foxnews.com/health/stuffed-sandwiches-recalled-over-possible-plastic-contamination\",\n      //         urlToImage: \"https://static.foxnews.com/foxnews.com/content/uploads/2019/04/Bremmer-Pepperoni-Pizza.jpg\",\n      //         views: 0\n      //     }\n      // ],\n      showOne: false,\n      search: ''\n    };\n\n    _this.articleProperty = function (arr, id, propName, showStatus) {\n      var _objectSpread2;\n\n      var oldItem = arr[id - 1];\n      var value = \"\";\n\n      if (propName) {\n        value = ++oldItem[propName];\n      }\n\n      var show = !oldItem[showStatus];\n\n      var item = _objectSpread({}, arr[id - 1], (_objectSpread2 = {}, _defineProperty(_objectSpread2, propName, value), _defineProperty(_objectSpread2, showStatus, show), _objectSpread2));\n\n      return [].concat(_toConsumableArray(arr.slice(0, id - 1)), [item], _toConsumableArray(arr.slice(id)));\n    };\n\n    _this.onShowArticle = function (id) {\n      _this.setState(function (_ref) {\n        var articles = _ref.articles,\n            showOne = _ref.showOne;\n\n        var art = _this.articleProperty(articles, id, \"views\", \"show\");\n\n        showOne = true;\n        return {\n          articles: art,\n          showOne: showOne\n        };\n      });\n    };\n\n    _this.onHideArticle = function (id) {\n      _this.setState(function (_ref2) {\n        var articles = _ref2.articles,\n            showOne = _ref2.showOne;\n\n        var art = _this.articleProperty(articles, id, \"\", \"show\");\n\n        showOne = false;\n        return {\n          articles: art,\n          showOne: showOne\n        };\n      });\n    };\n\n    _this.onLikes = function (id) {\n      _this.setState(function (_ref3) {\n        var articles = _ref3.articles;\n\n        var art = _this.articleProperty(articles, id, \"likes\");\n\n        return {\n          articles: art\n        };\n      });\n    };\n\n    _this.onSearch = function (search) {\n      _this.setState({\n        search: search\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      store.dispatch({\n        type: 'ADD_NEWS'\n      }); // let d = \n\n      this.setState(store.subc(store.getState()));\n    } // componentDidMount(){\n    //     //приходит promise с массивом объектов\n    //     this.newsService.getNews()\n    //     .then((articles)=>{\n    //         // ответ от promise в виде массива обьектов\n    //         //перебираем массив и перезаписываем  state \n    //         this.setState(()=>{\n    //             let artId = 1;\n    //             articles.map((elem)=>{\n    //                 // добавляем к объекту новые свойства\n    //                 elem.id = artId;\n    //                 elem.views = 0;\n    //                 elem.likes = 0;\n    //                 elem.show = false;\n    //                 artId++;\n    //                 return elem;\n    //             });\n    //             return{articles};\n    //         });\n    //     }); \n    // };\n\n  }, {\n    key: \"search\",\n    value: function search(articles, _search) {\n      if (!articles) {\n        return articles;\n      }\n\n      ;\n\n      if (_search.length === 0) {\n        return articles;\n      }\n\n      ;\n      var newArr = articles.filter(function (elem) {\n        if (elem.title || elem.description) {\n          if (typeof elem.content === \"string\") {\n            return elem.content.toLowerCase().indexOf(_search.toLowerCase()) > -1;\n          }\n\n          ; // не получается подсветка найденного текста\n\n          return elem.title.toLowerCase().indexOf(_search.toLowerCase()) > -1 || elem.description.toLowerCase().indexOf(_search.toLowerCase()) > -1;\n        }\n\n        ;\n        return false;\n      });\n      return newArr;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      console.log(this.state);\n      var _this$state = this.state,\n          articles = _this$state.articles,\n          search = _this$state.search;\n      var visibleItems = this.search(articles, search);\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, React.createElement(AppHeader, {\n        onSearch: this.onSearch,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }), React.createElement(Body, {\n        showOne: this.state.showOne,\n        visibleItems: visibleItems,\n        onShowArticle: this.onShowArticle,\n        onHideArticle: this.onHideArticle,\n        onLikes: this.onLikes,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }), React.createElement(Footer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport { App as default };","map":{"version":3,"sources":["/home/dmitry/Рабочий стол/NewsAppRedux/client/src/components/app/app.js"],"names":["React","Component","AppHeader","Body","Footer","store","App","state","showOne","search","articleProperty","arr","id","propName","showStatus","oldItem","value","show","item","slice","onShowArticle","setState","articles","art","onHideArticle","onLikes","onSearch","dispatch","type","subc","getState","length","newArr","filter","elem","title","description","content","toLowerCase","indexOf","console","log","visibleItems"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport AppHeader from '../app-header';\r\nimport Body from '../app-body';\r\nimport Footer from '../app-footer';\r\n\r\nimport store from '../../store'\r\n// import NewsService from '../../services/api-service';\r\n\r\nexport default class App extends Component{\r\n   \r\n    // newsService = new NewsService();\r\n\r\n    state ={\r\n        //    articles: [\r\n        //         {\r\n        //         author: \"Ann Schmidt\",\r\n        //         content: \"Approximately 56,578 pounds of stuffed sandwiches have been recalled because they are reportedly contaminated by semi-transparent plastic, according to the Food Safety and Inspection Service (FSIS). The recall was announced Friday, two days after the FSIS was… [+988 chars]\",\r\n        //         description: \"Approximately 56,578 pounds of stuffed sandwiches have been recalled because they are reportedly contaminated by semi-transparent plastic, according to the Food Safety and Inspection Service (FSIS).\",\r\n        //         id: 2,\r\n        //         likes: 0,\r\n        //         publishedAt: \"2019-04-09T00:39:51Z\",\r\n        //         show: false,\r\n        //         source: {id: \"fox-news\", name: \"Fox News\"},\r\n        //         title: \"Stuffed sandwiches recalled over possible plastic contamination, officials announce - Fox News\",\r\n        //         url: \"https://www.foxnews.com/health/stuffed-sandwiches-recalled-over-possible-plastic-contamination\",\r\n        //         urlToImage: \"https://static.foxnews.com/foxnews.com/content/uploads/2019/04/Bremmer-Pepperoni-Pizza.jpg\",\r\n        //         views: 0\r\n        //     }\r\n        // ],\r\n\r\n        \r\n        showOne: false,\r\n        search:''\r\n    }\r\n\r\n    componentDidMount(){\r\n        store.dispatch({type: 'ADD_NEWS'})\r\n        // let d = \r\n        this.setState(store.subc(store.getState()))\r\n    }\r\n\r\n\r\n    // componentDidMount(){\r\n    //     //приходит promise с массивом объектов\r\n    //     this.newsService.getNews()\r\n    //     .then((articles)=>{\r\n    //         // ответ от promise в виде массива обьектов\r\n    //         //перебираем массив и перезаписываем  state \r\n    //         this.setState(()=>{\r\n    //             let artId = 1;\r\n    //             articles.map((elem)=>{\r\n    //                 // добавляем к объекту новые свойства\r\n    //                 elem.id = artId;\r\n    //                 elem.views = 0;\r\n    //                 elem.likes = 0;\r\n    //                 elem.show = false;\r\n    //                 artId++;\r\n    //                 return elem;\r\n    //             });\r\n    //             return{articles};\r\n    //         });\r\n    //     }); \r\n    // };\r\n\r\n    articleProperty =(arr, id, propName, showStatus)=>{\r\n        const oldItem = arr[id-1];\r\n        let value = \"\"\r\n        if(propName){\r\n            value = ++(oldItem[propName]);\r\n        }\r\n        const show = !oldItem[showStatus]\r\n        const item = {...arr[id-1], [propName]:value, [showStatus]:show};\r\n        return [\r\n            ...arr.slice(0, id-1),\r\n            item,\r\n            ...arr.slice(id)\r\n        ];\r\n    };\r\n\r\n    onShowArticle=(id)=>{\r\n        this.setState(({articles, showOne})=>{\r\n           const art= this.articleProperty(articles, id, \"views\", \"show\" );\r\n            showOne = true\r\n            return {articles:art, showOne};\r\n        });\r\n    };\r\n\r\n    onHideArticle = (id)=>{\r\n        this.setState(({articles, showOne})=>{\r\n          const art = this.articleProperty(articles, id, \"\", \"show\")\r\n            showOne = false\r\n            return {articles:art, showOne};\r\n        }); \r\n    };\r\n\r\n    onLikes=(id)=>{\r\n        this.setState(({articles})=>{\r\n            const art = this.articleProperty(articles, id, \"likes\");\r\n            return {articles:art};\r\n        }); \r\n    };\r\n\r\n    onSearch = (search)=>{\r\n        this.setState({search});\r\n    };\r\n\r\n    search(articles, search){\r\n        if(!articles){\r\n            return articles;\r\n        };\r\n        if(search.length === 0){\r\n            return articles;\r\n        };\r\n        const newArr = articles.filter((elem)=>{\r\n            if(elem.title || elem.description ){\r\n                if(typeof(elem.content) === \"string\"){\r\n                  return  elem.content.toLowerCase().indexOf(search.toLowerCase()) > -1;\r\n                };\r\n              // не получается подсветка найденного текста\r\n            return  elem.title.toLowerCase().indexOf(search.toLowerCase()) > -1 || elem.description.toLowerCase().indexOf(search.toLowerCase()) > -1 \r\n            };\r\n            return false\r\n        });\r\n        return newArr\r\n    };\r\n\r\n    render(){\r\n       console.log(this.state)\r\n        const{articles, search} = this.state;\r\n        const visibleItems = this.search(articles, search);\r\n        return(\r\n            <div>\r\n                <AppHeader\r\n                    onSearch ={this.onSearch}\r\n                />\r\n                <Body\r\n                    showOne ={this.state.showOne}\r\n                    visibleItems = {visibleItems}\r\n                    onShowArticle={this.onShowArticle}\r\n                    onHideArticle={this.onHideArticle}\r\n                    onLikes={this.onLikes}\r\n                />\r\n                <Footer/>\r\n            </div>\r\n        );\r\n    };\r\n}"]},"metadata":{},"sourceType":"module"}