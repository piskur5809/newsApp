{"ast":null,"code":"import UUID from 'uuid';\nimport store from '../store';\nimport axios from 'axios'; // import getItems from '../services/api-service'\n// const newsService = new NewsService();\n\nexport var addNews = function addNews() {\n  debugger;\n  axios.get('https://newsapi.org/v2/top-headlines?country=us&category=business&apiKey=b62ca1edc4fb45c5b3c37c9696d253a6').then(function (res) {\n    var newArr = res.data.articles.map(function (element) {\n      return {\n        id: UUID(),\n        author: element.author,\n        title: element.title,\n        description: element.description,\n        content: element.content,\n        urlToImage: element.urlToImage,\n        views: 0,\n        likes: 0,\n        usersIP: []\n      };\n    });\n    store.dispatch({\n      type: 'ADD_NEWS',\n      payload: newArr,\n      loaded: true\n    });\n    loadNews(store.getState());\n  });\n};\nexport var loadNews = function loadNews() {\n  debugger;\n  axios.get('https://newsapi.org/v2/top-headlines?country=us&category=business&apiKey=b62ca1edc4fb45c5b3c37c9696d253a6').then(function (res) {\n    return res.data.articles.map(function (element) {\n      return {\n        id: UUID(),\n        author: element.author,\n        title: element.title,\n        description: element.description,\n        content: element.content,\n        urlToImage: element.urlToImage,\n        views: 0,\n        likes: 0,\n        usersIP: []\n      };\n    }); //  store.dispatch({\n    //      type: 'ADD_NEWS',\n    //      payload: newArr,\n    //      loaded: true \n    //   });\n    //   loadNews(store.getState())\n  }).then(function (item) {\n    var items = item;\n    var config = {\n      headers: {\n        'Content-type': 'application/json'\n      }\n    };\n    console.log(items, \"items\");\n    axios.post('/api/items', items, config).then(function (res) {\n      return console.log(res.data, \"res.data\");\n    });\n  });\n}; //           \n// loadNews();\n\nexport var viewNews = function viewNews(id) {\n  return {\n    type: 'VIEW_NEWS',\n    payload: id\n  };\n}; // {\n//     axios\n//     .post('/api/items', id)\n//     .then(res=>\n//         store.dispatch({\n//            type: 'VIEW_NEWS',\n//            payload: res.data,\n//            id: id \n//         }))\n//     };\n\nexport var likeNews = function likeNews(id) {\n  axios.post(\"/api/items/\").then(function (res) {\n    return store.dispatch({\n      type: 'LIKE_NEWS',\n      payload: res.data,\n      id: id\n    });\n  });\n}; // ({type: 'LIKE_NEWS', payload: id});\n\nexport var searchNews = function searchNews(text) {\n  return {\n    type: 'SEARCH_NEWS',\n    payload: text\n  };\n};\nexport var setItemsLoaded = function setItemsLoaded() {\n  return {\n    type: 'ITEMS_LOADED'\n  };\n}; // export function fetchPosts() {\n//  addNews()\n//     return newsService.getNews().then(news => store.dispatch(addNews(news)));\n// };","map":{"version":3,"sources":["/home/dmitry/Рабочий стол/newsAPP 2.0/client/src/actions/actions.js"],"names":["UUID","store","axios","addNews","get","then","res","newArr","data","articles","map","element","id","author","title","description","content","urlToImage","views","likes","usersIP","dispatch","type","payload","loaded","loadNews","getState","item","items","config","headers","console","log","post","viewNews","likeNews","searchNews","text","setItemsLoaded"],"mappings":"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","sourcesContent":["import UUID from 'uuid';\nimport store from '../store'\nimport axios from 'axios';\n// import getItems from '../services/api-service'\n\n\n// const newsService = new NewsService();\n\nexport const addNews = () => {debugger\n    axios\n    .get('https://newsapi.org/v2/top-headlines?country=us&category=business&apiKey=b62ca1edc4fb45c5b3c37c9696d253a6')\n    .then(res=> {\n       const newArr = res.data.articles.map(\n            element => {\n                return {\n                    id: UUID(),\n                    author: element.author,\n                    title: element.title,\n                    description: element.description,\n                    content: element.content,\n                    urlToImage: element.urlToImage,\n                    views: 0,\n                    likes: 0,\n                    usersIP: []\n                };\n            });\n        store.dispatch({\n            type: 'ADD_NEWS',\n            payload: newArr,\n            loaded: true \n         });\n         loadNews(store.getState())\n    });\n };\n\n export const loadNews = () => {debugger\n    \n    axios.get('https://newsapi.org/v2/top-headlines?country=us&category=business&apiKey=b62ca1edc4fb45c5b3c37c9696d253a6')\n    .then(res=> {\n        return res.data.articles.map(\n             element => {\n                 return {\n                     id: UUID(),\n                     author: element.author,\n                     title: element.title,\n                     description: element.description,\n                     content: element.content,\n                     urlToImage: element.urlToImage,\n                     views: 0,\n                     likes: 0,\n                     usersIP: []\n                 };\n             });\n        //  store.dispatch({\n        //      type: 'ADD_NEWS',\n        //      payload: newArr,\n        //      loaded: true \n        //   });\n        //   loadNews(store.getState())\n     })\n     .then(item => {\n         const items= item\n        const config = {\n            headers: {\n                'Content-type': 'application/json'\n              }\n            };\n         console.log(items,\"items\")\n        axios.post('/api/items', items, config)\n        .then(res => console.log(res.data, \"res.data\"))\n     })\n    \n}\n//           \n \n// loadNews();\nexport const viewNews = (id) => ({type: 'VIEW_NEWS', payload: id});\n// {\n//     axios\n//     .post('/api/items', id)\n//     .then(res=>\n//         store.dispatch({\n//            type: 'VIEW_NEWS',\n//            payload: res.data,\n//            id: id \n//         }))\n//     };\n    \n    \n\nexport const likeNews = (id) => {\n    axios\n    .post(`/api/items/`)\n    .then(res=>\n\n        store.dispatch({\n           type: 'LIKE_NEWS',\n           payload: res.data,\n           id: id \n        }))\n    };\n\n// ({type: 'LIKE_NEWS', payload: id});\n\nexport const searchNews = (text) => ({type: 'SEARCH_NEWS', payload: text});\n\nexport const setItemsLoaded = () => ({type: 'ITEMS_LOADED'});\n\n// export function fetchPosts() {\n//  addNews()\n//     return newsService.getNews().then(news => store.dispatch(addNews(news)));\n// };\n"]},"metadata":{},"sourceType":"module"}