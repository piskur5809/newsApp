{"ast":null,"code":"// const axios=require('axios');\n// const reqDate = require('./date');\n// const Article = require('../models/Item');\n// // получает новости с API и записывает в базу\n// const addNews = () => {\n//     // запрос к API\n//     axios\n//     .get(require('../config/keys').apiURI)\n//     .then(res=> {\n//         // перебор массива с новостями и добавление свойств\n//         res.data.articles.forEach( element => {\n//                 // ищет новости в базе и в случае их отсутствия добавляет новые \n//                 // поиск осуществляется по дате публикации (приходит от API)\n//             Article.find({publishedAt: element.publishedAt}, (err, doc)=>{\n//                 if(!doc.length){ \n//                     Article.create({ \n//                         author: element.author,  \n//                         title: element.title,\n//                         description: element.description,\n//                         content: element.content,\n//                         urlToImage: element.urlToImage,\n//                         publishedAt: element.publishedAt,\n//                         views: 0,\n//                         likes: 0,\n//                         usersIP: [],\n//                         date: reqDate.getToday()\n//                     });\n//                 };\n//                 if(err) console.log(err);\n//             });\n//         });\n//     })\n//     .catch(err=> console.log(err)); \n//  };\n// // удаляет старую коллекцию с новостями предыдущего дня\n//  const deleteNews = () => {\n//     Article.deleteMany({date: reqDate.getYesterday()},(err, doc)=>{\n//         if(err) console.log(err);\n//    });\n//  };\n//  module.exports.addNews = addNews;\n//  module.exports.deleteNews = deleteNews;","map":null,"metadata":{},"sourceType":"script"}