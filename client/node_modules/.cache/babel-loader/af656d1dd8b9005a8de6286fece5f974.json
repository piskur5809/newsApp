{"ast":null,"code":"import _toConsumableArray from \"/home/dmitry/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/NewsAppRedux/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"/home/dmitry/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/NewsAppRedux/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"/home/dmitry/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/NewsAppRedux/client/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/home/dmitry/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/NewsAppRedux/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/dmitry/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/NewsAppRedux/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/dmitry/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/NewsAppRedux/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/dmitry/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/NewsAppRedux/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/dmitry/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/NewsAppRedux/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/dmitry/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/NewsAppRedux/client/src/components/app/app.js\";\nimport React, { Component } from 'react';\nimport AppHeader from '../app-header';\nimport Body from '../app-body';\nimport Footer from '../app-footer';\nimport NewsService from '../../services/api-service';\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, App);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(App)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.newsService = new NewsService();\n    _this.state = {\n      articles: false,\n      showOne: false,\n      search: ''\n    };\n\n    _this.articleProperty = function (arr, id, propName, showStatus) {\n      var _objectSpread2;\n\n      var oldItem = arr[id - 1];\n      var value = \"\";\n\n      if (propName) {\n        value = ++oldItem[propName];\n      }\n\n      var show = !oldItem[showStatus];\n\n      var item = _objectSpread({}, arr[id - 1], (_objectSpread2 = {}, _defineProperty(_objectSpread2, propName, value), _defineProperty(_objectSpread2, showStatus, show), _objectSpread2));\n\n      return [].concat(_toConsumableArray(arr.slice(0, id - 1)), [item], _toConsumableArray(arr.slice(id)));\n    };\n\n    _this.onShowArticle = function (id) {\n      _this.setState(function (_ref) {\n        var articles = _ref.articles,\n            showOne = _ref.showOne;\n\n        var art = _this.articleProperty(articles, id, \"views\", \"show\");\n\n        showOne = true;\n        return {\n          articles: art,\n          showOne: showOne\n        };\n      });\n    };\n\n    _this.onHideArticle = function (id) {\n      _this.setState(function (_ref2) {\n        var articles = _ref2.articles,\n            showOne = _ref2.showOne;\n\n        var art = _this.articleProperty(articles, id, \"\", \"show\");\n\n        showOne = false;\n        return {\n          articles: art,\n          showOne: showOne\n        };\n      });\n    };\n\n    _this.onLikes = function (id) {\n      _this.setState(function (_ref3) {\n        var articles = _ref3.articles;\n\n        var art = _this.articleProperty(articles, id, \"likes\");\n\n        return {\n          articles: art\n        };\n      });\n    };\n\n    _this.onSearch = function (search) {\n      _this.setState({\n        search: search\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      //приходит promise с массивом объектов\n      this.newsService.getNews().then(function (articles) {\n        // ответ от promise в виде массива обьектов\n        //перебираем массив и перезаписываем  state \n        _this2.setState(function () {\n          var artId = 1;\n          articles.map(function (elem) {\n            // добавляем к объекту новые свойства\n            elem.id = artId;\n            elem.views = 0;\n            elem.likes = 0;\n            elem.show = false;\n            artId++;\n            return elem;\n          });\n          return {\n            articles: articles\n          };\n        });\n      });\n    }\n  }, {\n    key: \"search\",\n    value: function search(articles, _search) {\n      if (!articles) {\n        return articles;\n      }\n\n      ;\n\n      if (_search.length === 0) {\n        return articles;\n      }\n\n      ;\n      var newArr = articles.filter(function (elem) {\n        if (elem.title || elem.description) {\n          if (typeof elem.content === \"string\") {\n            return elem.content.toLowerCase().indexOf(_search.toLowerCase()) > -1;\n          }\n\n          ; // не получается подсветка найденного текста\n\n          return elem.title.toLowerCase().indexOf(_search.toLowerCase()) > -1 || elem.description.toLowerCase().indexOf(_search.toLowerCase()) > -1;\n        }\n\n        ;\n        return false;\n      });\n      return newArr;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      console.log(this.state);\n      var _this$state = this.state,\n          articles = _this$state.articles,\n          search = _this$state.search;\n      var visibleItems = this.search(articles, search);\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, React.createElement(AppHeader, {\n        onSearch: this.onSearch,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }), React.createElement(Body, {\n        showOne: this.state.showOne,\n        visibleItems: visibleItems,\n        onShowArticle: this.onShowArticle,\n        onHideArticle: this.onHideArticle,\n        onLikes: this.onLikes,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }), React.createElement(Footer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport { App as default };","map":{"version":3,"sources":["/home/dmitry/Рабочий стол/NewsAppRedux/client/src/components/app/app.js"],"names":["React","Component","AppHeader","Body","Footer","NewsService","App","newsService","state","articles","showOne","search","articleProperty","arr","id","propName","showStatus","oldItem","value","show","item","slice","onShowArticle","setState","art","onHideArticle","onLikes","onSearch","getNews","then","artId","map","elem","views","likes","length","newArr","filter","title","description","content","toLowerCase","indexOf","console","log","visibleItems"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport AppHeader from '../app-header';\r\nimport Body from '../app-body';\r\nimport Footer from '../app-footer';\r\nimport NewsService from '../../services/api-service';\r\n\r\nexport default class App extends Component{\r\n   \r\n    newsService = new NewsService();\r\n\r\n    state ={\r\n\r\n\r\n\r\n        \r\n        articles: false,\r\n        showOne: false,\r\n        search:''\r\n    }\r\n\r\n    componentDidMount(){\r\n        //приходит promise с массивом объектов\r\n        this.newsService.getNews()\r\n        .then((articles)=>{\r\n            // ответ от promise в виде массива обьектов\r\n            //перебираем массив и перезаписываем  state \r\n            this.setState(()=>{\r\n                let artId = 1;\r\n                articles.map((elem)=>{\r\n                    // добавляем к объекту новые свойства\r\n                    elem.id = artId;\r\n                    elem.views = 0;\r\n                    elem.likes = 0;\r\n                    elem.show = false;\r\n                    artId++;\r\n                    return elem;\r\n                });\r\n                return{articles};\r\n            });\r\n        }); \r\n    };\r\n\r\n    articleProperty =(arr, id, propName, showStatus)=>{\r\n        const oldItem = arr[id-1];\r\n        let value = \"\"\r\n        if(propName){\r\n            value = ++(oldItem[propName]);\r\n        }\r\n        const show = !oldItem[showStatus]\r\n        const item = {...arr[id-1], [propName]:value, [showStatus]:show};\r\n        return [\r\n            ...arr.slice(0, id-1),\r\n            item,\r\n            ...arr.slice(id)\r\n        ];\r\n    };\r\n\r\n    onShowArticle=(id)=>{\r\n        this.setState(({articles, showOne})=>{\r\n           const art= this.articleProperty(articles, id, \"views\", \"show\" );\r\n            showOne = true\r\n            return {articles:art, showOne};\r\n        });\r\n    };\r\n\r\n    onHideArticle = (id)=>{\r\n        this.setState(({articles, showOne})=>{\r\n          const art = this.articleProperty(articles, id, \"\", \"show\")\r\n            showOne = false\r\n            return {articles:art, showOne};\r\n        }); \r\n    };\r\n\r\n    onLikes=(id)=>{\r\n        this.setState(({articles})=>{\r\n            const art = this.articleProperty(articles, id, \"likes\");\r\n            return {articles:art};\r\n        }); \r\n    };\r\n\r\n    onSearch = (search)=>{\r\n        this.setState({search});\r\n    };\r\n\r\n    search(articles, search){\r\n        if(!articles){\r\n            return articles;\r\n        };\r\n        if(search.length === 0){\r\n            return articles;\r\n        };\r\n        const newArr = articles.filter((elem)=>{\r\n            if(elem.title || elem.description ){\r\n                if(typeof(elem.content) === \"string\"){\r\n                  return  elem.content.toLowerCase().indexOf(search.toLowerCase()) > -1;\r\n                };\r\n              // не получается подсветка найденного текста\r\n            return  elem.title.toLowerCase().indexOf(search.toLowerCase()) > -1 || elem.description.toLowerCase().indexOf(search.toLowerCase()) > -1 \r\n            };\r\n            return false\r\n        });\r\n        return newArr\r\n    };\r\n\r\n    render(){\r\n       console.log(this.state)\r\n        const{articles, search} = this.state;\r\n        const visibleItems = this.search(articles, search);\r\n        return(\r\n            <div>\r\n                <AppHeader\r\n                    onSearch ={this.onSearch}\r\n                />\r\n                <Body\r\n                    showOne ={this.state.showOne}\r\n                    visibleItems = {visibleItems}\r\n                    onShowArticle={this.onShowArticle}\r\n                    onHideArticle={this.onHideArticle}\r\n                    onLikes={this.onLikes}\r\n                />\r\n                <Footer/>\r\n            </div>\r\n        );\r\n    };\r\n}"]},"metadata":{},"sourceType":"module"}